{"version":3,"sources":["../../scripts.babel/controllers/one-tab.js"],"names":[],"mappings":"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","file":"one-tab.js","sourcesContent":["'use strict';\n\nangular.module('TabMagicApp')\n\n.controller('OneTabCtrl', function($scope, $moment, $tabs){\n\n\t// Navigation\n\t$scope.navigation = 'bringToOne';\n\n\t// Define one tab\n\t$scope.oneTab = {\n\n\t\t// Initialize\n\t\tinit: function(){\n\n\t\t\t// Get groups by ids\n\t\t\t$scope.oneTab.groups.getIds();\n\n\t\t},\n\n\t\t// Groups\n\t\tgroups: {\n\n\t\t\t// Data\n\t\t\tdata: [],\n\n\t\t\t// Get group ids\n\t\t\tgetIds: function(){\n\n\t\t\t\t// Call the default group\n\t\t\t\t$scope.oneTab.groups.get(0);\n\n\t\t\t\t// Get groups from storage\n\t\t\t\tchrome.storage.sync.get('tmOneTabGroups', function(data){\n\n\t\t\t\t\t// If there were groups returned from storage\n\t\t\t\t\tif(data.tmOneTabGroups){\n\t\t\t\t\t\tangular.forEach(data.tmOneTabGroups, function(id){\n\t\t\t\t\t\t\t$scope.oneTab.groups.get(id);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\t// Get group\n\t\t\tget: function(id){\n\n\t\t\t\t// Storage name for group\n\t\t\t\tvar storageName = 'tmOneTabGroup' + id.toString();\n\n\t\t\t\t// Group data\n\t\t\t\tvar groupData = {};\n\n\t\t\t\t// Get group from storage\n\t\t\t\tchrome.storage.sync.get(storageName, function(data){\n\t\t\t\t\tif(data[storageName]){\n\n\t\t\t\t\t\t// Set group data\n\t\t\t\t\t\tgroupData.id = id;\n\t\t\t\t\t\tgroupData.name = data[storageName].name;\n\t\t\t\t\t\tgroupData.tabs = data[storageName].tabs;\n\t\t\t\t\t\tgroupData.createDate = $moment(data[storageName].createDate).toDate();\n\n\t\t\t\t\t\t// Add group to overall data\n\t\t\t\t\t\t$scope.oneTab.groups.data.push(groupData);\n\n\t\t\t\t\t\t// Apply it to the scope\n\t\t\t\t\t\t$scope.$apply();\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\t// Create or modify a group\n\t\t\tcreate: function(groupId){\n\n\t\t\t\tconsole.log(groupId);\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Tabs\n\t\ttabs: {\n\n\t\t\t// Reopen\n\t\t\treopen: function(groupId, tabId, all){\n\n\t\t\t\t// Loop through all of the groups\n\t\t\t\tangular.forEach($scope.oneTab.groups.data, function(group){\n\n\t\t\t\t\t// If groupId is the group.id\n\t\t\t\t\tif(groupId === group.id){\n\n\t\t\t\t\t\t// Loop through all of the group's tabs\n\t\t\t\t\t\tangular.forEach(group.tabs, function(tab){\n\n\t\t\t\t\t\t\t// If tabId is the tab.id or if all is requested\n\t\t\t\t\t\t\tif(tabId === tab.id || all){\n\n\t\t\t\t\t\t\t\t// Reopen the tab\n\t\t\t\t\t\t\t\t$tabs.create(tab.url);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t\t// Remove the tab from the group\n\t\t\t\t$scope.oneTab.tabs.remove(groupId, tabId, all);\n\n\t\t\t},\n\n\t\t\t// Remove\n\t\t\tremove: function(groupId, tabId, all){\n\n\t\t\t\t// Loop through all of the groups\n\t\t\t\tangular.forEach($scope.oneTab.groups.data, function(group){\n\n\t\t\t\t\t// If groupId is the group.id\n\t\t\t\t\tif(groupId === group.id){\n\n\t\t\t\t\t\t// Loop through all of the group's tabs\n\t\t\t\t\t\tangular.forEach(group.tabs, function(tab){\n\n\t\t\t\t\t\t\t// If tabId is the tab.id or if all is requested\n\t\t\t\t\t\t\tif(tabId === tab.id || all){\n\n\t\t\t\t\t\t\t\t// Remove the tab by its index\n\t\t\t\t\t\t\t\tgroup.tabs.splice(group.tabs.indexOf(tab), 1);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Set store\n\t\t\t\t\t\tvar store = {};\n\t\t\t\t\t\tvar storeGroupName = 'tmOneTabGroup' + group.id.toString();\n\t\t\t\t\t\tstore[storeGroupName] = {\n\t\t\t\t\t\t\tid: group.id,\n\t\t\t\t\t\t\tname: group.name,\n\t\t\t\t\t\t\ttabs: group.tabs,\n\t\t\t\t\t\t\tcreateDate: group.createDate\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Sync storage\n\t\t\t\t\t\tchrome.storage.sync.set(store);\n\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// Initialize oneTab\n\t$scope.oneTab.init();\n\n});\n"]}